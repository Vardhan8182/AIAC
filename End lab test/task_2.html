<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Responsive Employee ID Card — Task 2</title>
    <style>
        /*==============
            Basic reset
        ================*/
        :root{
            --bg:#f4f7fb;
            --card:#ffffff;
            --accent:#0a84ff;
            --muted:#6b7280;
            --radius:12px;
            --shadow: 0 6px 18px rgba(12,31,63,0.08);
            --max-width:420px;
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background:linear-gradient(180deg,var(--bg),#eef3fb);
            display:flex;
            align-items:center;
            justify-content:center;
            padding:28px;
            color:#0b1220;
        }

        /*============
            Layout
        ============*/
        .wrap{
            width:100%;
            max-width:1100px;
            display:flex;
            gap:28px;
            align-items:flex-start;
            justify-content:center;
            flex-wrap:wrap;
        }

        /* Card area */
        .card-scene{
            perspective:1200px;
            width:100%;
            max-width:var(--max-width);
            min-width:260px;
        }

        .id-card{
            width:100%;
            background:var(--card);
            border-radius:var(--radius);
            box-shadow:var(--shadow);
            overflow:visible;
            transform-style:preserve-3d;
            transition:transform .7s cubic-bezier(.2,.9,.3,1);
            position:relative;
            padding:18px;
            display:flex;
            gap:12px;
            align-items:center;
        }

        /* Flip state */
        .card-scene.is-flipped .id-card{ transform: rotateY(180deg); }

        .profile{
            width:84px;
            height:84px;
            border-radius:14px;
            flex:0 0 84px;
            background:linear-gradient(135deg,var(--accent),#4cc9f0);
            color:white;
            display:flex;
            align-items:center;
            justify-content:center;
            font-weight:700;
            font-size:28px;
            box-shadow: 0 6px 16px rgba(10,20,60,0.08);
        }

        .details{
            display:flex;
            flex-direction:column;
            gap:6px;
            min-width:0;
        }
        .name{
            font-size:18px;
            font-weight:700;
            line-height:1;
        }
        .title{
            color:var(--muted);
            font-size:13px;
        }
        .meta{
            display:flex;
            gap:8px;
            margin-top:8px;
            flex-wrap:wrap;
        }
        .chip{
            background:#f8fafc;
            border-radius:999px;
            padding:6px 8px;
            font-size:12px;
            color:var(--muted);
            display:inline-flex;
            gap:8px;
            align-items:center;
        }

        /* Right column for QR and actions */
        .right{
            display:flex;
            flex-direction:column;
            gap:12px;
            align-items:center;
            margin-left:auto;
        }
        canvas.qr{
            width:84px;
            height:84px;
            border-radius:8px;
            background:white;
            box-shadow:inset 0 0 0 2px #f1f5f9;
        }
        .actions{
            display:flex;
            gap:8px;
            flex-wrap:wrap;
            justify-content:flex-end;
        }
        button.action{
            appearance:none;
            border:0;
            background:transparent;
            padding:6px 10px;
            border-radius:8px;
            cursor:pointer;
            color:var(--accent);
            font-weight:600;
            font-size:13px;
        }
        button.action.strong{
            background:var(--accent);
            color:white;
            padding:8px 12px;
            box-shadow:0 6px 18px rgba(10,130,255,0.12);
        }

        /* Backside (flipped) design */
        .id-card::after{
            content:"";
            position:absolute;
            inset:0;
            border-radius:var(--radius);
            background:linear-gradient(180deg,#fff,rgba(250,250,255,0.6));
            transform: translateZ(-1px);
        }
        .back{
            position:absolute;
            inset:0;
            backface-visibility:hidden;
            transform:rotateY(180deg);
            display:flex;
            padding:20px;
            gap:12px;
        }
        .back .col{
            flex:1;
            display:flex;
            flex-direction:column;
            gap:8px;
        }
        .back .info{
            font-size:13px;
            color:var(--muted);
            background:#fbfdff;
            padding:12px;
            border-radius:10px;
        }

        /* Accessibility focus */
        button:focus{outline:3px solid rgba(10,132,255,0.18); outline-offset:2px}

        /* Controls panel (demo) */
        .panel{
            min-width:260px;
            max-width:420px;
            background:linear-gradient(180deg,#ffffff,#fcfdff);
            border-radius:14px;
            padding:16px;
            box-shadow:var(--shadow);
            display:flex;
            flex-direction:column;
            gap:12px;
        }
        .panel h3{margin:0;font-size:16px}
        .field{display:flex;flex-direction:column;gap:6px;font-size:13px}
        input[type="text"],input[type="email"]{
            padding:10px 12px;border-radius:8px;border:1px solid #e6eef8;background:#fbfdff;
            font-size:14px;
        }

        /* Responsive: stack on small screens */
        @media (max-width:880px){
            .wrap{padding:8px}
            .panel{order:2;width:100%}
            .card-scene{order:1}
            .id-card{padding:14px}
        }

        /* Print: print only the card cleanly */
        @media print{
            body{background:white}
            .wrap>*:not(.card-scene){display:none}
            .card-scene{max-width:400px;margin:0 auto}
            .id-card{box-shadow:none}
        }
    </style>
</head>
<body>
    <!--
        Responsive Employee ID Card UI (single-file)
        - Purpose: Mobile + Web responsive employee ID card with flip, QR placeholder, and actions
        - Contains: HTML + CSS + JS, accessible controls, and vCard download

        Simple UI Test Scenarios (manual):
        1) Flip card:
             - Click "Flip" button (or press Enter while focused). Card should rotate to show the back info.
        2) Copy email:
             - Click "Copy Email". The employee email is copied to clipboard; a small alert appears.
        3) Download vCard:
             - Click "Download vCard". A .vcf file should be downloaded containing the employee details.
        4) Print:
             - Click "Print Card". Print preview should show only the card cleanly formatted.
        5) Responsive check:
             - Resize browser narrow (<420px) and verify layout stacks correctly; avatar scales and buttons remain accessible.
        6) Accessibility:
             - Tab through controls — each button can be focused (blue ring) and activated with Enter/Space.

        Notes:
        - Replace sample data in the JS 'employee' object if needed.
        - This file is self-contained; no external libs.
    -->

    <div class="wrap" role="application" aria-label="Employee ID card demo">
        <!-- Card scene: flipping container -->
        <div class="card-scene" id="scene" aria-live="polite">
            <div class="id-card" id="card" role="region" aria-label="Employee ID Card">
                <!-- Front side (regular content) -->
                <div style="display:flex;align-items:center;gap:12px;width:100%;backface-visibility:hidden">
                    <div class="profile" id="avatar" aria-hidden="false">JD</div>

                    <div class="details">
                        <div class="name" id="empName">Jane Doe</div>
                        <div class="title" id="empTitle">Product Designer</div>

                        <div class="meta" aria-hidden="false">
                            <div class="chip" title="Department" id="empDept">Design</div>
                            <div class="chip" title="Employee ID" id="empId">ID: 4052</div>
                        </div>

                        <div style="display:flex;gap:10px;margin-top:10px;align-items:center">
                            <div style="font-size:13px;color:var(--muted)">Email:</div>
                            <div id="empEmail" style="font-weight:600">jane.doe@example.com</div>
                        </div>
                    </div>

                    <div class="right" aria-hidden="false">
                        <canvas class="qr" id="qr" width="200" height="200" aria-hidden="true"></canvas>

                        <div class="actions" role="group" aria-label="Card actions">
                            <button class="action" id="flipBtn" aria-pressed="false" title="Flip card">Flip</button>
                            <button class="action" id="copyEmailBtn" title="Copy email">Copy Email</button>
                            <button class="action strong" id="vcardBtn" title="Download vCard">Download vCard</button>
                            <button class="action" id="printBtn" title="Print card">Print</button>
                        </div>
                    </div>
                </div>

                <!-- Back side (flipped content) -->
                <div class="back" aria-hidden="true">
                    <div class="col">
                        <div style="font-weight:700">Contact</div>
                        <div class="info" id="backContact">
                            Phone: +1 (555) 123-4567<br>
                            Office: Building B — 4th Floor<br>
                            Location: Remote/Hybrid
                        </div>

                        <div style="font-weight:700;margin-top:6px">Roles & Notes</div>
                        <div class="info" id="backNotes">
                            Lead on mobile UX, mentor for new hires, handles design system updates.
                        </div>
                    </div>

                    <div class="col" style="align-items:flex-end">
                        <div style="font-size:12px;color:var(--muted)">Company</div>
                        <div style="font-weight:800;font-size:20px">ACME Studio</div>
                        <div style="margin-top:auto;font-size:12px;color:var(--muted)">Valid: 2025 • Employee ID: 4052</div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Controls panel for demo, editable fields -->
        <aside class="panel" aria-label="Controls">
            <h3>Employee Details</h3>

            <div class="field">
                <label for="nameInput">Name</label>
                <input id="nameInput" type="text" value="Jane Doe" />
            </div>

            <div class="field">
                <label for="titleInput">Title</label>
                <input id="titleInput" type="text" value="Product Designer" />
            </div>

            <div class="field">
                <label for="emailInput">Email</label>
                <input id="emailInput" type="email" value="jane.doe@example.com" />
            </div>

            <div style="display:flex;gap:8px;justify-content:flex-end">
                <button class="action" id="applyBtn">Apply</button>
                <button class="action" id="resetBtn">Reset</button>
            </div>

            <hr style="border:none;height:1px;background:#eef4ff;margin:8px 0">

            <div style="font-size:13px;color:var(--muted)">
                Tips: Use "Flip" to check backside info. "Download vCard" creates a .vcf to import into contacts.
            </div>
        </aside>
    </div>

    <script>
        // ==========
        // Data model (sample employee)
        // ==========
        const employee = {
            name: "Jane Doe",
            title: "Product Designer",
            email: "jane.doe@example.com",
            dept: "Design",
            id: "4052",
            phone: "+1 (555) 123-4567",
            office: "Building B — 4th Floor",
            notes: "Lead on mobile UX, mentor for new hires, handles design system updates.",
            company: "ACME Studio",
            validUntil: "2025"
        };

        // ==========
        // DOM references
        // ==========
        const scene = document.getElementById('scene');
        const card = document.getElementById('card');
        const flipBtn = document.getElementById('flipBtn');
        const copyEmailBtn = document.getElementById('copyEmailBtn');
        const vcardBtn = document.getElementById('vcardBtn');
        const printBtn = document.getElementById('printBtn');
        const qrCanvas = document.getElementById('qr');

        const empNameEl = document.getElementById('empName');
        const empTitleEl = document.getElementById('empTitle');
        const empDeptEl = document.getElementById('empDept');
        const empIdEl = document.getElementById('empId');
        const empEmailEl = document.getElementById('empEmail');
        const avatarEl = document.getElementById('avatar');
        const backContact = document.getElementById('backContact');
        const backNotes = document.getElementById('backNotes');

        // Controls
        const nameInput = document.getElementById('nameInput');
        const titleInput = document.getElementById('titleInput');
        const emailInput = document.getElementById('emailInput');
        const applyBtn = document.getElementById('applyBtn');
        const resetBtn = document.getElementById('resetBtn');

        // ==========
        // Initialize UI with employee data
        // ==========
        function init() {
            renderEmployee(employee);
            drawSimpleQr(qrCanvas, `EMP:${employee.id};NAME:${employee.name};EMAIL:${employee.email}`);
        }
        function renderEmployee(emp) {
            empNameEl.textContent = emp.name;
            empTitleEl.textContent = emp.title;
            empDeptEl.textContent = emp.dept;
            empIdEl.textContent = 'ID: ' + emp.id;
            empEmailEl.textContent = emp.email;
            avatarEl.textContent = initials(emp.name);
            backContact.innerHTML = `Phone: ${emp.phone}<br>Office: ${emp.office}<br>Location: Remote/Hybrid`;
            backNotes.textContent = emp.notes;
            // Update inputs
            nameInput.value = emp.name;
            titleInput.value = emp.title;
            emailInput.value = emp.email;
        }

        function initials(name){
            return name.split(' ').slice(0,2).map(s=>s[0] ? s[0].toUpperCase() : '').join('');
        }

        // ==========
        // Flip logic
        // ==========
        let flipped = false;
        function toggleFlip(){
            flipped = !flipped;
            scene.classList.toggle('is-flipped', flipped);
            // Backface accessibility
            card.querySelector('.back').setAttribute('aria-hidden', !flipped ? 'true' : 'false');
            flipBtn.setAttribute('aria-pressed', String(flipped));
        }
        flipBtn.addEventListener('click', toggleFlip);

        // ==========
        // Copy email to clipboard
        // ==========
        copyEmailBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(employee.email);
                flash('Email copied');
            } catch (e) {
                flash('Copy failed');
            }
        });

        // ==========
        // Generate and download vCard (.vcf)
        // ==========
        vcardBtn.addEventListener('click', () => {
            const vcard = [
                'BEGIN:VCARD',
                'VERSION:3.0',
                `N:${employee.name}`,
                `FN:${employee.name}`,
                `ORG:${employee.company}`,
                `TITLE:${employee.title}`,
                `EMAIL;TYPE=WORK:${employee.email}`,
                `TEL;TYPE=WORK,VOICE:${employee.phone}`,
                `NOTE:${employee.notes}`,
                `UID:${employee.id}`,
                'END:VCARD'
            ].join('\r\n');

            const blob = new Blob([vcard], {type:'text/vcard'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${employee.name.replace(/\s+/g,'_')}.vcf`;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
            flash('vCard downloaded');
        });

        // ==========
        // Print card (print-only styling present in CSS)
        // ==========
        printBtn.addEventListener('click', () => {
            window.print();
        });

        // ==========
        // Simple feedback (brief toast)
        // ==========
        function flash(msg){
            const el = document.createElement('div');
            el.textContent = msg;
            el.style.position='fixed';
            el.style.left='50%';
            el.style.bottom='20px';
            el.style.transform='translateX(-50%)';
            el.style.background='rgba(12,31,63,0.9)';
            el.style.color='white';
            el.style.padding='8px 14px';
            el.style.borderRadius='8px';
            el.style.zIndex=9999;
            document.body.appendChild(el);
            setTimeout(()=>el.style.opacity='0.0',1200);
            setTimeout(()=>el.remove(),1800);
        }

        // ==========
        // Simple QR-like pattern drawing (not a real QR generator, but useful placeholder)
        // ==========
        function drawSimpleQr(canvas, seed){
            const ctx = canvas.getContext('2d');
            const size = Math.min(canvas.width, canvas.height);
            ctx.fillStyle = '#fff';
            ctx.fillRect(0,0,canvas.width,canvas.height);

            // Hash-like seeded pattern
            let h = 0;
            for (let i=0;i<seed.length;i++) h = (h * 31 + seed.charCodeAt(i)) >>> 0;

            const module = Math.floor(size / 7);
            ctx.fillStyle = '#0b1220';
            for (let y=0;y<7;y++){
                for (let x=0;x<7;x++){
                    h = (h * 1664525 + 1013904223) >>> 0;
                    if (h % 2 === 0) {
                        ctx.fillRect(x*module + 6, y*module + 6, module-4, module-4);
                    }
                }
            }
            // small logo in center
            ctx.fillStyle = '#0a84ff';
            ctx.fillRect(size*0.35, size*0.35, size*0.3, size*0.3);
        }

        // ==========
        // Controls: apply and reset
        // ==========
        applyBtn.addEventListener('click', () => {
            employee.name = nameInput.value.trim() || employee.name;
            employee.title = titleInput.value.trim() || employee.title;
            employee.email = emailInput.value.trim() || employee.email;
            // re-render and refresh qr
            renderEmployee(employee);
            drawSimpleQr(qrCanvas, `EMP:${employee.id};NAME:${employee.name};EMAIL:${employee.email}`);
            flash('Details updated');
        });

        resetBtn.addEventListener('click', () => {
            // restore original sample values
            Object.assign(employee, {
                name: "Jane Doe",
                title: "Product Designer",
                email: "jane.doe@example.com"
            });
            renderEmployee(employee);
            drawSimpleQr(qrCanvas, `EMP:${employee.id};NAME:${employee.name};EMAIL:${employee.email}`);
            flash('Reset to sample data');
        });

        // Keyboard support: Enter toggles flip when flip button focused
        flipBtn.addEventListener('keyup', (e) => {
            if (e.key === 'Enter' || e.key === ' ') toggleFlip();
        });

        // Initialize UI
        init();

        // Expose small API (for debugging in console)
        window.EmployeeCard = { employee, toggleFlip, renderEmployee };

    </script>
</body>
</html>